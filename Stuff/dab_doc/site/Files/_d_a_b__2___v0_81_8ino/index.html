
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://mcjohnffs.github.io/Files/_d_a_b__2___v0_81_8ino/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>C:/Users/Jack/Documents/GitHub/RAU-DAB-Radio-V2/New Code_ab 16.06.2021/DAB_2_V0.1/DAB_2_V0.1.ino - DAB V2.0</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cusersjackdocumentsgithubrau-dab-radio-v2new-code_ab-16062021dab_2_v01dab_2_v01ino" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DAB V2.0" class="md-header__button md-logo" aria-label="DAB V2.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAB V2.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C:/Users/Jack/Documents/GitHub/RAU-DAB-Radio-V2/New Code_ab 16.06.2021/DAB_2_V0.1/DAB_2_V0.1.ino
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DAB V2.0" class="md-nav__button md-logo" aria-label="DAB V2.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    DAB V2.0
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Hard-%20und%20Software%20Knfiguration/" class="md-nav__link">
        Hard- und Software Konfiguration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Installation%20der%20Entwicklungsumgebung/" class="md-nav__link">
        Installation der Entwicklungsumgebung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../code_beschreibung/" class="md-nav__link">
        Code Beschreibung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../bm83/" class="md-nav__link">
        BM83 Anleitung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Testsoftware/" class="md-nav__link">
        Testsoftware
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Source Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Source Code
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defines" class="md-nav__link">
    Defines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-documentation" class="md-nav__link">
    Functions Documentation
  </a>
  
    <nav class="md-nav" aria-label="Functions Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-swserial" class="md-nav__link">
    function swSerial
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-bm83" class="md-nav__link">
    function bm83
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-leddriver" class="md-nav__link">
    function ledDriver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-my_disp_flush" class="md-nav__link">
    function my_disp_flush
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-setup" class="md-nav__link">
    function setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-loop" class="md-nav__link">
    function loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-read_inputs" class="md-nav__link">
    function read_inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_bm83setup" class="md-nav__link">
    function event_bm83setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_bm83pair" class="md-nav__link">
    function event_bm83pair
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_soundsetup" class="md-nav__link">
    function event_soundsetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_sw1" class="md-nav__link">
    function event_sw1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-rotate_r" class="md-nav__link">
    function rotate_r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-showdirection_r" class="md-nav__link">
    function showDirection_r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-rotate_u" class="md-nav__link">
    function rotate_u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-showdirection_u" class="md-nav__link">
    function showDirection_u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-encoder_read" class="md-nav__link">
    function encoder_read
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-enc_get_new_moves" class="md-nav__link">
    function enc_get_new_moves
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_ingain" class="md-nav__link">
    function slider_event_cb_ingain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_fade1" class="md-nav__link">
    function slider_event_cb_fade1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_fade2" class="md-nav__link">
    function slider_event_fade2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_bass" class="md-nav__link">
    function slider_event_cb_bass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_mid" class="md-nav__link">
    function slider_event_mid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_treb" class="md-nav__link">
    function slider_event_treb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes-documentation" class="md-nav__link">
    Attributes Documentation
  </a>
  
    <nav class="md-nav" aria-label="Attributes Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-mfbpin" class="md-nav__link">
    variable mfbPin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-r" class="md-nav__link">
    variable r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-u" class="md-nav__link">
    variable u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-bd" class="md-nav__link">
    variable bd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-mcp1" class="md-nav__link">
    variable mcp1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-mcp2" class="md-nav__link">
    variable mcp2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-task1" class="md-nav__link">
    variable Task1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-task2" class="md-nav__link">
    variable Task2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-g" class="md-nav__link">
    variable g
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-encoder_indev" class="md-nav__link">
    variable encoder_indev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tabview" class="md-nav__link">
    variable tabview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab1" class="md-nav__link">
    variable tab1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab2" class="md-nav__link">
    variable tab2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab3" class="md-nav__link">
    variable tab3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab4" class="md-nav__link">
    variable tab4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-gauge1" class="md-nav__link">
    variable gauge1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-led1" class="md-nav__link">
    variable led1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn" class="md-nav__link">
    variable btn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn1" class="md-nav__link">
    variable btn1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn2" class="md-nav__link">
    variable btn2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn3" class="md-nav__link">
    variable btn3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw1" class="md-nav__link">
    variable sw1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw2" class="md-nav__link">
    variable sw2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw3" class="md-nav__link">
    variable sw3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont" class="md-nav__link">
    variable cont
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont2" class="md-nav__link">
    variable cont2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont3" class="md-nav__link">
    variable cont3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-bar1" class="md-nav__link">
    variable bar1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-lmeter" class="md-nav__link">
    variable lmeter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-lmeter2" class="md-nav__link">
    variable lmeter2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-label" class="md-nav__link">
    variable label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-spinbox" class="md-nav__link">
    variable spinbox
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label" class="md-nav__link">
    variable slider_label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label2" class="md-nav__link">
    variable slider_label2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label3" class="md-nav__link">
    variable slider_label3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label4" class="md-nav__link">
    variable slider_label4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label5" class="md-nav__link">
    variable slider_label5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-conf" class="md-nav__link">
    variable conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-i" class="md-nav__link">
    variable i
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-vol" class="md-nav__link">
    variable vol
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-encoderlastvalue" class="md-nav__link">
    variable encoderLastValue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-k" class="md-nav__link">
    variable k
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tft" class="md-nav__link">
    variable tft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-disp_buf" class="md-nav__link">
    variable disp_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-buf_1" class="md-nav__link">
    variable buf_1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-buf_2" class="md-nav__link">
    variable buf_2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#macros-documentation" class="md-nav__link">
    Macros Documentation
  </a>
  
    <nav class="md-nav" aria-label="Macros Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-buffer_multiplier" class="md-nav__link">
    define BUFFER_MULTIPLIER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-rx_pin" class="md-nav__link">
    define RX_PIN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tx_pin" class="md-nav__link">
    define TX_PIN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tx_ind" class="md-nav__link">
    define TX_IND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-dac1" class="md-nav__link">
    define DAC1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc1_rotary_pin_a" class="md-nav__link">
    define ENC1_ROTARY_PIN_A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc1_rotary_pin_b" class="md-nav__link">
    define ENC1_ROTARY_PIN_B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc2_rotary_pin_a" class="md-nav__link">
    define ENC2_ROTARY_PIN_A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc2_rotary_pin_b" class="md-nav__link">
    define ENC2_ROTARY_PIN_B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-clicks_per_step" class="md-nav__link">
    define CLICKS_PER_STEP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-min_pos" class="md-nav__link">
    define MIN_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-max_pos" class="md-nav__link">
    define MAX_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-start_pos" class="md-nav__link">
    define START_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-increment" class="md-nav__link">
    define INCREMENT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source code
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Datenbl%C3%A4tter/" class="md-nav__link">
        Datenblätter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Quellen/" class="md-nav__link">
        Quellen
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defines" class="md-nav__link">
    Defines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-documentation" class="md-nav__link">
    Functions Documentation
  </a>
  
    <nav class="md-nav" aria-label="Functions Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-swserial" class="md-nav__link">
    function swSerial
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-bm83" class="md-nav__link">
    function bm83
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-leddriver" class="md-nav__link">
    function ledDriver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-my_disp_flush" class="md-nav__link">
    function my_disp_flush
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-setup" class="md-nav__link">
    function setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-loop" class="md-nav__link">
    function loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-read_inputs" class="md-nav__link">
    function read_inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_bm83setup" class="md-nav__link">
    function event_bm83setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_bm83pair" class="md-nav__link">
    function event_bm83pair
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_soundsetup" class="md-nav__link">
    function event_soundsetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-event_sw1" class="md-nav__link">
    function event_sw1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-rotate_r" class="md-nav__link">
    function rotate_r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-showdirection_r" class="md-nav__link">
    function showDirection_r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-rotate_u" class="md-nav__link">
    function rotate_u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-showdirection_u" class="md-nav__link">
    function showDirection_u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-encoder_read" class="md-nav__link">
    function encoder_read
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-enc_get_new_moves" class="md-nav__link">
    function enc_get_new_moves
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_ingain" class="md-nav__link">
    function slider_event_cb_ingain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_fade1" class="md-nav__link">
    function slider_event_cb_fade1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_fade2" class="md-nav__link">
    function slider_event_fade2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_cb_bass" class="md-nav__link">
    function slider_event_cb_bass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_mid" class="md-nav__link">
    function slider_event_mid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-slider_event_treb" class="md-nav__link">
    function slider_event_treb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes-documentation" class="md-nav__link">
    Attributes Documentation
  </a>
  
    <nav class="md-nav" aria-label="Attributes Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-mfbpin" class="md-nav__link">
    variable mfbPin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-r" class="md-nav__link">
    variable r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-u" class="md-nav__link">
    variable u
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-bd" class="md-nav__link">
    variable bd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-mcp1" class="md-nav__link">
    variable mcp1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-mcp2" class="md-nav__link">
    variable mcp2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-task1" class="md-nav__link">
    variable Task1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-task2" class="md-nav__link">
    variable Task2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-g" class="md-nav__link">
    variable g
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-encoder_indev" class="md-nav__link">
    variable encoder_indev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tabview" class="md-nav__link">
    variable tabview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab1" class="md-nav__link">
    variable tab1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab2" class="md-nav__link">
    variable tab2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab3" class="md-nav__link">
    variable tab3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tab4" class="md-nav__link">
    variable tab4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-gauge1" class="md-nav__link">
    variable gauge1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-led1" class="md-nav__link">
    variable led1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn" class="md-nav__link">
    variable btn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn1" class="md-nav__link">
    variable btn1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn2" class="md-nav__link">
    variable btn2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-btn3" class="md-nav__link">
    variable btn3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw1" class="md-nav__link">
    variable sw1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw2" class="md-nav__link">
    variable sw2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-sw3" class="md-nav__link">
    variable sw3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont" class="md-nav__link">
    variable cont
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont2" class="md-nav__link">
    variable cont2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-cont3" class="md-nav__link">
    variable cont3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-bar1" class="md-nav__link">
    variable bar1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-lmeter" class="md-nav__link">
    variable lmeter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-lmeter2" class="md-nav__link">
    variable lmeter2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-label" class="md-nav__link">
    variable label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-spinbox" class="md-nav__link">
    variable spinbox
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label" class="md-nav__link">
    variable slider_label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label2" class="md-nav__link">
    variable slider_label2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label3" class="md-nav__link">
    variable slider_label3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label4" class="md-nav__link">
    variable slider_label4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-slider_label5" class="md-nav__link">
    variable slider_label5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-conf" class="md-nav__link">
    variable conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-i" class="md-nav__link">
    variable i
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-vol" class="md-nav__link">
    variable vol
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-encoderlastvalue" class="md-nav__link">
    variable encoderLastValue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-k" class="md-nav__link">
    variable k
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-tft" class="md-nav__link">
    variable tft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-disp_buf" class="md-nav__link">
    variable disp_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-buf_1" class="md-nav__link">
    variable buf_1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-buf_2" class="md-nav__link">
    variable buf_2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#macros-documentation" class="md-nav__link">
    Macros Documentation
  </a>
  
    <nav class="md-nav" aria-label="Macros Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-buffer_multiplier" class="md-nav__link">
    define BUFFER_MULTIPLIER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-rx_pin" class="md-nav__link">
    define RX_PIN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tx_pin" class="md-nav__link">
    define TX_PIN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tx_ind" class="md-nav__link">
    define TX_IND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-dac1" class="md-nav__link">
    define DAC1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc1_rotary_pin_a" class="md-nav__link">
    define ENC1_ROTARY_PIN_A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc1_rotary_pin_b" class="md-nav__link">
    define ENC1_ROTARY_PIN_B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc2_rotary_pin_a" class="md-nav__link">
    define ENC2_ROTARY_PIN_A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-enc2_rotary_pin_b" class="md-nav__link">
    define ENC2_ROTARY_PIN_B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-clicks_per_step" class="md-nav__link">
    define CLICKS_PER_STEP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-min_pos" class="md-nav__link">
    define MIN_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-max_pos" class="md-nav__link">
    define MAX_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-start_pos" class="md-nav__link">
    define START_POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-increment" class="md-nav__link">
    define INCREMENT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="cusersjackdocumentsgithubrau-dab-radio-v2new-code_ab-16062021dab_2_v01dab_2_v01ino">C:/Users/Jack/Documents/GitHub/RAU-DAB-Radio-V2/New Code_ab 16.06.2021/DAB_2_V0.1/DAB_2_V0.1.ino</h1>
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>SoftwareSerial</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-swserial">swSerial</a></strong>(<a href="/Files/_d_a_b__2___v0_81_8ino/#define-rx_pin">RX_PIN</a> , <a href="/Files/_d_a_b__2___v0_81_8ino/#define-tx_pin">TX_PIN</a> )<br>Software serial instance (BM83)</td>
</tr>
<tr>
<td>BM83</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-bm83">bm83</a></strong>(<a href="/Files/_d_a_b__2___v0_81_8ino/#function-swserial">swSerial</a> , <a href="/Files/_d_a_b__2___v0_81_8ino/#define-tx_ind">TX_IND</a> )<br>BM83 instance (BM83)</td>
</tr>
<tr>
<td>PCA9634</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-leddriver">ledDriver</a></strong>(0x15 , 4 )<br>Led driver instance (PCA9634)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-my_disp_flush">my_disp_flush</a></strong>(lv_disp_drv_t * disp, const lv_area_t * area, lv_color_t * color_p)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-setup">setup</a></strong>()</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-loop">loop</a></strong>()</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-read_inputs">read_inputs</a></strong>(void * parameter)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-event_bm83setup">event_bm83setup</a></strong>(lv_obj_t * obj, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-event_bm83pair">event_bm83pair</a></strong>(lv_obj_t * obj, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-event_soundsetup">event_soundsetup</a></strong>(lv_obj_t * obj, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-event_sw1">event_sw1</a></strong>(lv_obj_t * obj, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-rotate_r">rotate_r</a></strong>(ESPRotary &amp; r)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-showdirection_r">showDirection_r</a></strong>(ESPRotary &amp; r)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-rotate_u">rotate_u</a></strong>(ESPRotary &amp; u)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-showdirection_u">showDirection_u</a></strong>(ESPRotary &amp; u)</td>
</tr>
<tr>
<td>bool</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-encoder_read">encoder_read</a></strong>(lv_indev_drv_t * drv, lv_indev_data_t * data)</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-enc_get_new_moves">enc_get_new_moves</a></strong>()</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_cb_ingain">slider_event_cb_ingain</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_cb_fade1">slider_event_cb_fade1</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_fade2">slider_event_fade2</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_cb_bass">slider_event_cb_bass</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_mid">slider_event_mid</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#function-slider_event_treb">slider_event_treb</a></strong>(lv_obj_t * slider, lv_event_t event)</td>
</tr>
</tbody>
</table>
<h2 id="attributes">Attributes</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>const int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-mfbpin">mfbPin</a></strong> <br>BM83 MFB Pin, required for BM83 power on.</td>
</tr>
<tr>
<td>ESPRotary</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-r">r</a></strong> <br>Encoder 1 instance.</td>
</tr>
<tr>
<td>ESPRotary</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-u">u</a></strong> <br>Encoder 2 instance.</td>
</tr>
<tr>
<td>BD37544FS</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-bd">bd</a></strong> <br>Sound processor instance (BD37544FS)</td>
</tr>
<tr>
<td>MCP23017</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-mcp1">mcp1</a></strong> <br>MCP1 (Display board)</td>
</tr>
<tr>
<td>MCP23017</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-mcp2">mcp2</a></strong> <br>MCP2 (MCU board)</td>
</tr>
<tr>
<td>TaskHandle_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-task1">Task1</a></strong> <br>Task handle.</td>
</tr>
<tr>
<td>TaskHandle_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-task2">Task2</a></strong> <br>Task handle.</td>
</tr>
<tr>
<td>lv_group_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-g">g</a></strong></td>
</tr>
<tr>
<td>lv_indev_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-encoder_indev">encoder_indev</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tabview">tabview</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tab1">tab1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tab2">tab2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tab3">tab3</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tab4">tab4</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-gauge1">gauge1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-led1">led1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-btn">btn</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-btn1">btn1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-btn2">btn2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-btn3">btn3</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-sw1">sw1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-sw2">sw2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-sw3">sw3</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-cont">cont</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-cont2">cont2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-cont3">cont3</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-bar1">bar1</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-lmeter">lmeter</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-lmeter2">lmeter2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-label">label</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-spinbox">spinbox</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-slider_label">slider_label</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-slider_label2">slider_label2</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-slider_label3">slider_label3</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-slider_label4">slider_label4</a></strong></td>
</tr>
<tr>
<td>lv_obj_t *</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-slider_label5">slider_label5</a></strong></td>
</tr>
<tr>
<td>uint8_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-conf">conf</a></strong></td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-i">i</a></strong></td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-vol">vol</a></strong></td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-encoderlastvalue">encoderLastValue</a></strong></td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-k">k</a></strong></td>
</tr>
<tr>
<td>TFT_eSPI</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-tft">tft</a></strong></td>
</tr>
<tr>
<td>lv_disp_buf_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-disp_buf">disp_buf</a></strong></td>
</tr>
<tr>
<td>lv_color_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-buf_1">buf_1</a></strong></td>
</tr>
<tr>
<td>lv_color_t</td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#variable-buf_2">buf_2</a></strong></td>
</tr>
</tbody>
</table>
<h2 id="defines">Defines</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-buffer_multiplier">BUFFER_MULTIPLIER</a></strong> <br>LVGL buffer.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-rx_pin">RX_PIN</a></strong> <br>BM83 UART RX.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-tx_pin">TX_PIN</a></strong> <br>BM83 UART TX.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-tx_ind">TX_IND</a></strong> <br>BM83 TX IND.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-dac1">DAC1</a></strong> <br>DAC pin for DC_SET_V.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-enc1_rotary_pin_a">ENC1_ROTARY_PIN_A</a></strong> <br>Encoder 1 Pin A.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-enc1_rotary_pin_b">ENC1_ROTARY_PIN_B</a></strong> <br>Encoder 1 Pin B.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-enc2_rotary_pin_a">ENC2_ROTARY_PIN_A</a></strong> <br>Encoder 2 Pin A.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-enc2_rotary_pin_b">ENC2_ROTARY_PIN_B</a></strong> <br>Encoder 2 Pin B.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-clicks_per_step">CLICKS_PER_STEP</a></strong></td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-min_pos">MIN_POS</a></strong> <br>Max volume 0 dB.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-max_pos">MAX_POS</a></strong> <br>Min volume -87 dB.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-start_pos">START_POS</a></strong> <br>Volume start position.</td>
</tr>
<tr>
<td></td>
<td><strong><a href="/Files/_d_a_b__2___v0_81_8ino/#define-increment">INCREMENT</a></strong> <br>Volume increment.</td>
</tr>
</tbody>
</table>
<h2 id="functions-documentation">Functions Documentation</h2>
<h3 id="function-swserial">function swSerial</h3>
<div class="highlight"><pre><span></span><code><span class="n">SoftwareSerial</span> <span class="n">swSerial</span><span class="p">(</span>
    <span class="n">RX_PIN</span> <span class="p">,</span>
    <span class="n">TX_PIN</span> 
<span class="p">)</span>
</code></pre></div>
<p>Software serial instance (BM83) </p>
<h3 id="function-bm83">function bm83</h3>
<div class="highlight"><pre><span></span><code><span class="n">BM83</span> <span class="n">bm83</span><span class="p">(</span>
    <span class="n">swSerial</span> <span class="p">,</span>
    <span class="n">TX_IND</span> 
<span class="p">)</span>
</code></pre></div>
<p>BM83 instance (BM83) </p>
<h3 id="function-leddriver">function ledDriver</h3>
<div class="highlight"><pre><span></span><code><span class="n">PCA9634</span> <span class="n">ledDriver</span><span class="p">(</span>
    <span class="mh">0x15</span> <span class="p">,</span>
    <span class="mi">4</span> 
<span class="p">)</span>
</code></pre></div>
<p>Led driver instance (PCA9634) </p>
<h3 id="function-my_disp_flush">function my_disp_flush</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">my_disp_flush</span><span class="p">(</span>
    <span class="n">lv_disp_drv_t</span> <span class="o">*</span> <span class="n">disp</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">lv_area_t</span> <span class="o">*</span> <span class="n">area</span><span class="p">,</span>
    <span class="n">lv_color_t</span> <span class="o">*</span> <span class="n">color_p</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-setup">function setup</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">setup</span><span class="p">()</span>
</code></pre></div>
<h3 id="function-loop">function loop</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">loop</span><span class="p">()</span>
</code></pre></div>
<p>&lt; Watchdog timer manipulation</p>
<h3 id="function-read_inputs">function read_inputs</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">read_inputs</span><span class="p">(</span>
    <span class="kt">void</span> <span class="o">*</span> <span class="n">parameter</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-event_bm83setup">function event_bm83setup</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">event_bm83setup</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">obj</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-event_bm83pair">function event_bm83pair</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">event_bm83pair</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">obj</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-event_soundsetup">function event_soundsetup</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">event_soundsetup</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">obj</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-event_sw1">function event_sw1</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">event_sw1</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">obj</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-rotate_r">function rotate_r</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">rotate_r</span><span class="p">(</span>
    <span class="n">ESPRotary</span> <span class="o">&amp;</span> <span class="n">r</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-showdirection_r">function showDirection_r</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">showDirection_r</span><span class="p">(</span>
    <span class="n">ESPRotary</span> <span class="o">&amp;</span> <span class="n">r</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-rotate_u">function rotate_u</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">rotate_u</span><span class="p">(</span>
    <span class="n">ESPRotary</span> <span class="o">&amp;</span> <span class="n">u</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-showdirection_u">function showDirection_u</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="n">showDirection_u</span><span class="p">(</span>
    <span class="n">ESPRotary</span> <span class="o">&amp;</span> <span class="n">u</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-encoder_read">function encoder_read</h3>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span> <span class="n">encoder_read</span><span class="p">(</span>
    <span class="n">lv_indev_drv_t</span> <span class="o">*</span> <span class="n">drv</span><span class="p">,</span>
    <span class="n">lv_indev_data_t</span> <span class="o">*</span> <span class="n">data</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-enc_get_new_moves">function enc_get_new_moves</h3>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="n">enc_get_new_moves</span><span class="p">()</span>
</code></pre></div>
<h3 id="function-slider_event_cb_ingain">function slider_event_cb_ingain</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_cb_ingain</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-slider_event_cb_fade1">function slider_event_cb_fade1</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_cb_fade1</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-slider_event_fade2">function slider_event_fade2</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_fade2</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-slider_event_cb_bass">function slider_event_cb_bass</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_cb_bass</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-slider_event_mid">function slider_event_mid</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_mid</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="function-slider_event_treb">function slider_event_treb</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="n">slider_event_treb</span><span class="p">(</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider</span><span class="p">,</span>
    <span class="n">lv_event_t</span> <span class="n">event</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="attributes-documentation">Attributes Documentation</h2>
<h3 id="variable-mfbpin">variable mfbPin</h3>
<div class="highlight"><pre><span></span><code><span class="k">const</span> <span class="kt">int</span> <span class="n">mfbPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>
</code></pre></div>
<p>BM83 MFB Pin, required for BM83 power on. </p>
<h3 id="variable-r">variable r</h3>
<div class="highlight"><pre><span></span><code><span class="n">ESPRotary</span> <span class="n">r</span><span class="p">;</span>
</code></pre></div>
<p>Encoder 1 instance. </p>
<h3 id="variable-u">variable u</h3>
<div class="highlight"><pre><span></span><code><span class="n">ESPRotary</span> <span class="n">u</span><span class="p">;</span>
</code></pre></div>
<p>Encoder 2 instance. </p>
<h3 id="variable-bd">variable bd</h3>
<div class="highlight"><pre><span></span><code><span class="n">BD37544FS</span> <span class="n">bd</span><span class="p">;</span>
</code></pre></div>
<p>Sound processor instance (BD37544FS) </p>
<h3 id="variable-mcp1">variable mcp1</h3>
<div class="highlight"><pre><span></span><code><span class="n">MCP23017</span> <span class="n">mcp1</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x20</span><span class="p">);</span>
</code></pre></div>
<p>MCP1 (Display board) </p>
<h3 id="variable-mcp2">variable mcp2</h3>
<div class="highlight"><pre><span></span><code><span class="n">MCP23017</span> <span class="n">mcp2</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x24</span><span class="p">);</span>
</code></pre></div>
<p>MCP2 (MCU board) </p>
<h3 id="variable-task1">variable Task1</h3>
<div class="highlight"><pre><span></span><code><span class="n">TaskHandle_t</span> <span class="n">Task1</span><span class="p">;</span>
</code></pre></div>
<p>Task handle. </p>
<h3 id="variable-task2">variable Task2</h3>
<div class="highlight"><pre><span></span><code><span class="n">TaskHandle_t</span> <span class="n">Task2</span><span class="p">;</span>
</code></pre></div>
<p>Task handle. </p>
<h3 id="variable-g">variable g</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="n">lv_group_t</span> <span class="o">*</span> <span class="n">g</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-encoder_indev">variable encoder_indev</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="n">lv_indev_t</span> <span class="o">*</span> <span class="n">encoder_indev</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tabview">variable tabview</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">tabview</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tab1">variable tab1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">tab1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tab2">variable tab2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">tab2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tab3">variable tab3</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">tab3</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tab4">variable tab4</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">tab4</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-gauge1">variable gauge1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">gauge1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-led1">variable led1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">led1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-btn">variable btn</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">btn</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-btn1">variable btn1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">btn1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-btn2">variable btn2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">btn2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-btn3">variable btn3</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">btn3</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-sw1">variable sw1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">sw1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-sw2">variable sw2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">sw2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-sw3">variable sw3</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">sw3</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-cont">variable cont</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">cont</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-cont2">variable cont2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">cont2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-cont3">variable cont3</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">cont3</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-bar1">variable bar1</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">bar1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-lmeter">variable lmeter</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">lmeter</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-lmeter2">variable lmeter2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">lmeter2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-label">variable label</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">label</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-spinbox">variable spinbox</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">spinbox</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-slider_label">variable slider_label</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider_label</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-slider_label2">variable slider_label2</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider_label2</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-slider_label3">variable slider_label3</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider_label3</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-slider_label4">variable slider_label4</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider_label4</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-slider_label5">variable slider_label5</h3>
<div class="highlight"><pre><span></span><code><span class="n">lv_obj_t</span> <span class="o">*</span> <span class="n">slider_label5</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-conf">variable conf</h3>
<div class="highlight"><pre><span></span><code><span class="kt">uint8_t</span> <span class="n">conf</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-i">variable i</h3>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-vol">variable vol</h3>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="n">vol</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-encoderlastvalue">variable encoderLastValue</h3>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="n">encoderLastValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-k">variable k</h3>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-tft">variable tft</h3>
<div class="highlight"><pre><span></span><code><span class="n">TFT_eSPI</span> <span class="n">tft</span> <span class="o">=</span> <span class="n">TFT_eSPI</span><span class="p">();</span>
</code></pre></div>
<h3 id="variable-disp_buf">variable disp_buf</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="n">lv_disp_buf_t</span> <span class="n">disp_buf</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-buf_1">variable buf_1</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_1</span><span class="p">;</span>
</code></pre></div>
<h3 id="variable-buf_2">variable buf_2</h3>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_2</span><span class="p">;</span>
</code></pre></div>
<h2 id="macros-documentation">Macros Documentation</h2>
<h3 id="define-buffer_multiplier">define BUFFER_MULTIPLIER</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define BUFFER_MULTIPLIER 35</span>
</code></pre></div>
<p>LVGL buffer. </p>
<h3 id="define-rx_pin">define RX_PIN</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define RX_PIN 4</span>
</code></pre></div>
<p>BM83 UART RX. </p>
<h3 id="define-tx_pin">define TX_PIN</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define TX_PIN 0</span>
</code></pre></div>
<p>BM83 UART TX. </p>
<h3 id="define-tx_ind">define TX_IND</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define TX_IND 5</span>
</code></pre></div>
<p>BM83 TX IND. </p>
<h3 id="define-dac1">define DAC1</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define DAC1 26</span>
</code></pre></div>
<p>DAC pin for DC_SET_V. </p>
<h3 id="define-enc1_rotary_pin_a">define ENC1_ROTARY_PIN_A</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define ENC1_ROTARY_PIN_A 34</span>
</code></pre></div>
<p>Encoder 1 Pin A. </p>
<h3 id="define-enc1_rotary_pin_b">define ENC1_ROTARY_PIN_B</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define ENC1_ROTARY_PIN_B 35</span>
</code></pre></div>
<p>Encoder 1 Pin B. </p>
<h3 id="define-enc2_rotary_pin_a">define ENC2_ROTARY_PIN_A</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define ENC2_ROTARY_PIN_A 39</span>
</code></pre></div>
<p>Encoder 2 Pin A. </p>
<h3 id="define-enc2_rotary_pin_b">define ENC2_ROTARY_PIN_B</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define ENC2_ROTARY_PIN_B 36</span>
</code></pre></div>
<p>Encoder 2 Pin B. </p>
<h3 id="define-clicks_per_step">define CLICKS_PER_STEP</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define CLICKS_PER_STEP 2</span>
</code></pre></div>
<h3 id="define-min_pos">define MIN_POS</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define MIN_POS 0</span>
</code></pre></div>
<p>Max volume 0 dB. </p>
<h3 id="define-max_pos">define MAX_POS</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define MAX_POS 87</span>
</code></pre></div>
<p>Min volume -87 dB. </p>
<h3 id="define-start_pos">define START_POS</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define START_POS 0</span>
</code></pre></div>
<p>Volume start position. </p>
<h3 id="define-increment">define INCREMENT</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define INCREMENT 1</span>
</code></pre></div>
<p>Volume increment. </p>
<h2 id="source-code">Source code</h2>
<div class="highlight"><pre><span></span><code><span class="c1">// Libraries</span>
<span class="cp">#include</span> <span class="cpf">&lt;lvgl.h&gt;</span><span class="c1">                   // Light and versatile Embedded Graphics Library (LVGL)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;TFT_eSPI.h&gt;</span><span class="c1">               // General TFT library (TFT_eSPI)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;touch.h&quot;</span><span class="c1">                  // Communication header for the touch controller - between &quot;FT6206&quot; and LVGL</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="c1">                   // Arduino I2C library</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PCA9634.h&gt;</span><span class="c1">                // Led driver library (PCA9634)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;MCP23017.h&gt;</span><span class="c1">               // Port expander library (MPC23017)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;BM83.h&quot;</span><span class="c1">                   // Bluetooth Module library (BM83/BM64)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;SoftwareSerial.h&gt;</span><span class="c1">         // SoftwareSerial Library for ESP32</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;BD37544FS.h&gt;</span><span class="c1">              // Sound processor library (BD37544FS)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;ESPRotary.h&quot;</span><span class="c1">              // Encoder Library für ESP32</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;soc/timer_group_struct.h&quot;</span><span class="c1"> // Watchdog timer</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;soc/timer_group_reg.h&quot;</span><span class="c1">    // Watchdog timer</span><span class="cp"></span>

<span class="cp">#define BUFFER_MULTIPLIER 35 </span>

<span class="cp">#define RX_PIN 4 </span>
<span class="cp">#define TX_PIN 0 </span>
<span class="cp">#define TX_IND 5 </span>
<span class="cp">#define DAC1 26  </span>

<span class="cp">#define ENC1_ROTARY_PIN_A 34 </span>
<span class="cp">#define ENC1_ROTARY_PIN_B 35 </span>

<span class="cp">#define ENC2_ROTARY_PIN_A 39 </span>
<span class="cp">#define ENC2_ROTARY_PIN_B 36 </span>

<span class="cp">#define CLICKS_PER_STEP 2 </span><span class="c1">// Number depends on the encoder</span>

<span class="cp">#define MIN_POS 0   </span>
<span class="cp">#define MAX_POS 87  </span>
<span class="cp">#define START_POS 0 </span>
<span class="cp">#define INCREMENT 1 </span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">mfbPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span> 

<span class="n">ESPRotary</span> <span class="n">r</span><span class="p">;</span> 
<span class="n">ESPRotary</span> <span class="n">u</span><span class="p">;</span> 

<span class="n">BD37544FS</span> <span class="n">bd</span><span class="p">;</span> 

<span class="n">SoftwareSerial</span> <span class="nf">swSerial</span><span class="p">(</span><span class="n">RX_PIN</span><span class="p">,</span> <span class="n">TX_PIN</span><span class="p">);</span> 
<span class="n">BM83</span> <span class="nf">bm83</span><span class="p">(</span><span class="n">swSerial</span><span class="p">,</span> <span class="n">TX_IND</span><span class="p">);</span>             

<span class="n">PCA9634</span> <span class="nf">ledDriver</span><span class="p">(</span><span class="mh">0x15</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> 

<span class="n">MCP23017</span> <span class="n">mcp1</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x20</span><span class="p">);</span> 
<span class="n">MCP23017</span> <span class="n">mcp2</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x24</span><span class="p">);</span> 

<span class="n">TaskHandle_t</span> <span class="n">Task1</span><span class="p">;</span> 
<span class="n">TaskHandle_t</span> <span class="n">Task2</span><span class="p">;</span> 

<span class="k">static</span> <span class="n">lv_group_t</span> <span class="o">*</span><span class="n">g</span><span class="p">;</span>             <span class="c1">//An object group</span>
<span class="k">static</span> <span class="n">lv_indev_t</span> <span class="o">*</span><span class="n">encoder_indev</span><span class="p">;</span> <span class="c1">//Encoder 1 input device</span>

<span class="c1">// Global LVGL object variables</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tabview</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab4</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">gauge1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">led1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">bar1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">lmeter</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">lmeter2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">label</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">spinbox</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label4</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label5</span><span class="p">;</span>

<span class="c1">// Global variables</span>
<span class="kt">uint8_t</span> <span class="n">conf</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">vol</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">encoderLastValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">k</span><span class="p">;</span> <span class="c1">// Current enocder position (volume)</span>

<span class="n">TFT_eSPI</span> <span class="n">tft</span> <span class="o">=</span> <span class="n">TFT_eSPI</span><span class="p">();</span> <span class="cm">/* TFT instance */</span>
<span class="k">static</span> <span class="n">lv_disp_buf_t</span> <span class="n">disp_buf</span><span class="p">;</span>
<span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_1</span><span class="p">[</span><span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="n">BUFFER_MULTIPLIER</span><span class="p">];</span>
<span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_2</span><span class="p">[</span><span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="n">BUFFER_MULTIPLIER</span><span class="p">];</span>
<span class="cp">#if USE_LV_LOG != 0</span>
<span class="cm">/* Serial debugging */</span>

<span class="kt">void</span> <span class="nf">my_print</span><span class="p">(</span><span class="n">lv_log_level_t</span> <span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dsc</span><span class="p">)</span>
<span class="p">{</span>

    <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s@%d-&gt;%s</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">dsc</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/* Display flushing */</span>
<span class="kt">void</span> <span class="nf">my_disp_flush</span><span class="p">(</span><span class="n">lv_disp_drv_t</span> <span class="o">*</span><span class="n">disp</span><span class="p">,</span> <span class="k">const</span> <span class="n">lv_area_t</span> <span class="o">*</span><span class="n">area</span><span class="p">,</span> <span class="n">lv_color_t</span> <span class="o">*</span><span class="n">color_p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">uint32_t</span> <span class="n">w</span> <span class="o">=</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">x2</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">x1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="kt">uint32_t</span> <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">y2</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">y1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">tft</span><span class="p">.</span><span class="n">startWrite</span><span class="p">();</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setAddrWindow</span><span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">x1</span><span class="p">,</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">y1</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">pushColors</span><span class="p">(</span><span class="o">&amp;</span><span class="n">color_p</span><span class="o">-&gt;</span><span class="n">full</span><span class="p">,</span> <span class="n">w</span> <span class="o">*</span> <span class="n">h</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">endWrite</span><span class="p">();</span>

    <span class="n">lv_disp_flush_ready</span><span class="p">(</span><span class="n">disp</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// The standard Arduino setup function used for setup and configuration</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>  
<span class="p">{</span>

    <span class="c1">// I2C init @ 100 kHz</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">setClock</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>

    <span class="c1">// Serial debugging @ 115200 baud</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>

    <span class="c1">// Software serial for BM83/BM64 Uart communication @ 9600 baud</span>
    <span class="n">swSerial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

    <span class="c1">// Input read task creation</span>
    <span class="n">xTaskCreatePinnedToCore</span><span class="p">(</span>
        <span class="n">read_inputs</span><span class="p">,</span>   <span class="cm">/* Task function. */</span>
        <span class="s">&quot;read_inputs&quot;</span><span class="p">,</span> <span class="cm">/* String with name of task. */</span>
        <span class="mi">10000</span><span class="p">,</span>         <span class="cm">/* Stack size in bytes. */</span>
        <span class="nb">NULL</span><span class="p">,</span>          <span class="cm">/* Parameter passed as input of the task */</span>
        <span class="mi">1</span><span class="p">,</span>             <span class="cm">/* Priority of the task. */</span>
        <span class="o">&amp;</span><span class="n">Task1</span><span class="p">,</span>        <span class="cm">/* Task handle. */</span>
        <span class="mi">0</span><span class="p">);</span>            <span class="cm">/* Core 0 or 1 (Core 1 is used for the arduino loop function for now)*/</span>

    <span class="c1">// Encoder read task creation</span>
    <span class="c1">//xTaskCreatePinnedToCore(encoder_loop, &quot;encoder_loop&quot;, 10000, NULL, 2, &amp;Task2, 0);</span>

    <span class="c1">// Sets the MFB pin (GPIO23) as output (BM83)</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

    <span class="c1">// Encoder 1+2 init</span>

    <span class="c1">// Led driver init</span>
    <span class="n">ledDriver</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="c1">// all on (inverted)</span>
    <span class="n">ledDriver</span><span class="p">.</span><span class="n">allOff</span><span class="p">();</span>

    <span class="c1">// Charger IC setup----------------------------------------------------------------</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x14</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0xB9</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x02</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x03</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x5A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x04</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x40</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x05</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x66</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x06</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x5A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x07</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x89</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x09</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x04</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>
    <span class="c1">// --------------------------------------------------------------------</span>

    <span class="c1">//MCP 1 init</span>
    <span class="n">mcp1</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
    <span class="n">mcp1</span><span class="p">.</span><span class="n">portMode</span><span class="p">(</span><span class="n">MCP23017Port</span><span class="o">::</span><span class="n">A</span><span class="p">,</span> <span class="mb">0b11111111</span><span class="p">);</span> <span class="c1">// Set all as inputs (MCP1)</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

    <span class="c1">//MCP 2 init</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">portMode</span><span class="p">(</span><span class="n">MCP23017Port</span><span class="o">::</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Set all as outputs (MCP2)</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

    <span class="c1">// Standby sequence</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 7.5V disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// +-5V disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// PVCC disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Power Amp shutdown activation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// Power Amp mute activation</span>

    <span class="c1">// Power up sequence</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;7.5V enabled!&quot;</span><span class="p">);</span> <span class="c1">// 7.5V enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;+-5V enabled!&quot;</span><span class="p">);</span> <span class="c1">// +-5V enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">dacWrite</span><span class="p">(</span><span class="n">DAC1</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;PVCC enabled!&quot;</span><span class="p">);</span> <span class="c1">// PVCC enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Power Amp Shutdown deactivated!&quot;</span><span class="p">);</span> <span class="c1">// Power amp shutdown deactivation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Power Amp Mute deactivated!&quot;</span><span class="p">);</span> <span class="c1">// Power amp mute deactivation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

    <span class="c1">// LVGL init</span>
    <span class="n">lv_init</span><span class="p">();</span>

<span class="cp">#if USE_LV_LOG != 0</span>
    <span class="cm">/* Serial debugging */</span>
    <span class="kt">void</span> <span class="n">my_print</span><span class="p">(</span><span class="n">lv_log_level_t</span> <span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dsc</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s@%d-&gt;%s</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">dsc</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
    <span class="p">}</span>
<span class="cp">#endif</span>

    <span class="c1">// TFT init</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setRotation</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

    <span class="c1">// Touch device init</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">touch</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">150</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Couldn&#39;t start FT6206 touchscreen controller&quot;</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;FT6206 touchscreen controller connected!&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">lv_disp_buf_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_buf</span><span class="p">,</span> <span class="n">buf_1</span><span class="p">,</span> <span class="n">buf_2</span><span class="p">,</span> <span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

    <span class="c1">// Display init</span>
    <span class="n">lv_disp_drv_t</span> <span class="n">disp_drv</span><span class="p">;</span>
    <span class="n">lv_disp_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_drv</span><span class="p">);</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">hor_res</span> <span class="o">=</span> <span class="n">tft</span><span class="p">.</span><span class="n">width</span><span class="p">();</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">ver_res</span> <span class="o">=</span> <span class="n">tft</span><span class="p">.</span><span class="n">height</span><span class="p">();</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">flush_cb</span> <span class="o">=</span> <span class="n">my_disp_flush</span><span class="p">;</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">disp_buf</span><span class="p">;</span>
    <span class="n">lv_disp_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_drv</span><span class="p">);</span>

    <span class="c1">// Display input driver init</span>
    <span class="n">lv_indev_drv_t</span> <span class="n">indev_drv</span><span class="p">;</span>
    <span class="n">lv_indev_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LV_INDEV_TYPE_POINTER</span><span class="p">;</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">read_cb</span> <span class="o">=</span> <span class="n">my_touchpad_read</span><span class="p">;</span>
    <span class="n">lv_indev_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>

    <span class="n">lv_indev_drv_t</span> <span class="n">enc_indev</span><span class="p">;</span>
    <span class="n">lv_indev_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LV_INDEV_TYPE_ENCODER</span><span class="p">;</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">read_cb</span> <span class="o">=</span> <span class="n">encoder_read</span><span class="p">;</span>
    <span class="n">encoder_indev</span> <span class="o">=</span> <span class="n">lv_indev_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>

    <span class="k">static</span> <span class="n">lv_style_t</span> <span class="n">style1</span><span class="p">;</span>
    <span class="n">lv_style_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>
    <span class="n">lv_style_set_border_color</span><span class="p">(</span><span class="o">&amp;</span><span class="n">style1</span><span class="p">,</span> <span class="n">LV_STATE_FOCUSED</span><span class="p">,</span> <span class="n">LV_COLOR_RED</span><span class="p">);</span>

    <span class="c1">//Create Group for encoder 1</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">lv_group_create</span><span class="p">();</span>
    <span class="n">lv_indev_set_group</span><span class="p">(</span><span class="n">encoder_indev</span><span class="p">,</span> <span class="n">g</span><span class="p">);</span>

    <span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">needle_colors</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_BLUE</span><span class="p">;</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_ORANGE</span><span class="p">;</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_PURPLE</span><span class="p">;</span>

    <span class="n">tabview</span> <span class="o">=</span> <span class="n">lv_tabview_create</span><span class="p">(</span><span class="n">lv_scr_act</span><span class="p">(),</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_tabview_set_btns_pos</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="n">LV_TABVIEW_TAB_POS_BOTTOM</span><span class="p">);</span>
    <span class="c1">//lv_tabview_set_anim_time(tabview, 100);</span>

    <span class="cm">/*Add 4 tabs (the tabs are page (lv_page) and can be scrolled*/</span>
    <span class="n">tab1</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Setups&quot;</span><span class="p">);</span>
    <span class="n">tab2</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Values&quot;</span><span class="p">);</span>
    <span class="n">tab3</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Enables&quot;</span><span class="p">);</span>
    <span class="n">tab4</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Parameters&quot;</span><span class="p">);</span>

    <span class="n">lmeter</span> <span class="o">=</span> <span class="n">lv_linemeter_create</span><span class="p">(</span><span class="n">tab2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_linemeter_set_range</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>   <span class="cm">/*Set the range*/</span>
    <span class="n">lv_linemeter_set_value</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>       <span class="cm">/*Set the current value*/</span>
    <span class="n">lv_linemeter_set_scale</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="cm">/*Set the angle and number of lines*/</span>
    <span class="n">lv_obj_set_size</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">lmeter2</span> <span class="o">=</span> <span class="n">lv_linemeter_create</span><span class="p">(</span><span class="n">tab2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_linemeter_set_range</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>   <span class="cm">/*Set the range*/</span>
    <span class="n">lv_linemeter_set_value</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>       <span class="cm">/*Set the current value*/</span>
    <span class="n">lv_linemeter_set_scale</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="cm">/*Set the angle and number of lines*/</span>
    <span class="n">lv_obj_set_size</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">cont</span> <span class="o">=</span> <span class="n">lv_cont_create</span><span class="p">(</span><span class="n">tab3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>                   <span class="cm">/*Auto realign when the size changes*/</span>
    <span class="n">lv_obj_align_origo</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_CENTER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/*This parametrs will be sued when realigned*/</span>
    <span class="n">lv_cont_set_fit</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="n">LV_FIT_TIGHT</span><span class="p">);</span>
    <span class="n">lv_cont_set_layout</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="n">LV_LAYOUT_GRID</span><span class="p">);</span>

    <span class="n">sw1</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;7.5V&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">sw2</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;+-5V&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">sw3</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;PVCC&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">cont2</span> <span class="o">=</span> <span class="n">lv_cont_create</span><span class="p">(</span><span class="n">tab1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>                   <span class="cm">/*Auto realign when the size changes*/</span>
    <span class="n">lv_obj_align_origo</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_CENTER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/*This parametrs will be sued when realigned*/</span>
    <span class="n">lv_cont_set_fit</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="n">LV_FIT_TIGHT</span><span class="p">);</span>
    <span class="n">lv_cont_set_layout</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="n">LV_LAYOUT_GRID</span><span class="p">);</span>

    <span class="n">btn1</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="n">event_bm83setup</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;BM83 Setup&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="n">btn2</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="n">event_bm83pair</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;BM83 Pairing&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="n">btn3</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="n">event_soundsetup</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;Sound Proc. Setup&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="cm">/* Create a slider in the center of the display */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span> <span class="o">=</span> <span class="n">lv_slider_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_width</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">LV_DPI</span> <span class="o">*</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">slider_event_cb_ingain</span><span class="p">);</span>
    <span class="n">lv_slider_set_range</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

    <span class="cm">/* Create a label below the slider */</span>
    <span class="n">slider_label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">LV_ALIGN_OUT_BOTTOM_MID</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

    <span class="cm">/* Create an informative label */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="s">&quot;Input Gain (0-20dB)&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>

    <span class="c1">//______________________________________________________________</span>

    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">lv_slider_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_width</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="n">LV_DPI</span> <span class="o">*</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="n">slider_event_cb_fade1</span><span class="p">);</span>
    <span class="n">lv_slider_set_range</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">87</span><span class="p">);</span>

    <span class="cm">/* Create a label below the slider */</span>
    <span class="n">slider_label2</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="n">slider2</span><span class="p">,</span> <span class="n">LV_ALIGN_OUT_BOTTOM_MID</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

    <span class="cm">/* Create an informative label */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">info2</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">info2</span><span class="p">,</span> <span class="s">&quot;Fader 1 (0-(-87dB))&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">info2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">tabview</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw1</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw2</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw3</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn1</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn2</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn3</span><span class="p">);</span>

    <span class="n">lv_group_set_wrap</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_group_set_editing</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

    <span class="n">r</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ENC1_ROTARY_PIN_A</span><span class="p">,</span> <span class="n">ENC1_ROTARY_PIN_B</span><span class="p">,</span> <span class="n">CLICKS_PER_STEP</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setChangedHandler</span><span class="p">(</span><span class="n">rotate_r</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setLeftRotationHandler</span><span class="p">(</span><span class="n">showDirection_r</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setRightRotationHandler</span><span class="p">(</span><span class="n">showDirection_r</span><span class="p">);</span>

    <span class="n">u</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ENC2_ROTARY_PIN_A</span><span class="p">,</span> <span class="n">ENC2_ROTARY_PIN_B</span><span class="p">,</span> <span class="n">CLICKS_PER_STEP</span><span class="p">,</span> <span class="n">MIN_POS</span><span class="p">,</span> <span class="n">MAX_POS</span><span class="p">,</span> <span class="n">START_POS</span><span class="p">,</span> <span class="n">INCREMENT</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setChangedHandler</span><span class="p">(</span><span class="n">rotate_u</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setLeftRotationHandler</span><span class="p">(</span><span class="n">showDirection_u</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setRightRotationHandler</span><span class="p">(</span><span class="n">showDirection_u</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="c1">//&lt; Standard arduino setup function</span>
<span class="p">{</span>

    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_wprotect</span> <span class="o">=</span> <span class="n">TIMG_WDT_WKEY_VALUE</span><span class="p">;</span> 
    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_feed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//&lt;</span>
    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_wprotect</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//&lt;</span>

    <span class="n">conf</span> <span class="o">=</span> <span class="n">mcp1</span><span class="p">.</span><span class="n">readRegister</span><span class="p">(</span><span class="n">MCP23017Register</span><span class="o">::</span><span class="n">GPIO_A</span><span class="p">);</span> <span class="c1">//&lt; MCP1 register read</span>

    <span class="n">r</span><span class="p">.</span><span class="n">loop</span><span class="p">();</span> <span class="c1">//&lt; Encoder 1 menu loop</span>
    <span class="n">u</span><span class="p">.</span><span class="n">loop</span><span class="p">();</span> <span class="c1">//&lt; Encoder 2 volume loop</span>

    <span class="n">lv_task_handler</span><span class="p">();</span> <span class="c1">//&lt; LVG task handler loop</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">read_inputs</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">parameter</span><span class="p">)</span> <span class="c1">//&lt; Buttons read function</span>

<span class="p">{</span>

    <span class="k">for</span> <span class="p">(;;)</span>
    <span class="p">{</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">bitRead</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>

                <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="p">{</span>
                <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vTaskDelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_bm83setup</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span> <span class="c1">//&lt; BM83 setup function</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// sets the MFB Pin 23 &quot;High&quot; to power on BM83 over BAT_IN</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">powerOn</span><span class="p">();</span>            <span class="c1">// Sends &quot;power on&quot; command over UART to BM83</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// sets the MFB Pin 23 &quot;LOW&quot; (no longer needed after power on process)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_bm83pair</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">mmiAction</span><span class="p">(</span><span class="n">BM83_MMI_STANDBY_ENTERING_PAIRING</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_soundsetup</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setSelect</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// int 0...7 === A B C D E F INPUT_SHORT INPUT_MUTE</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// int 0...7 === 0...20 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setVol_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_2</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setBass</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setMidd</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setTreb</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_sw1</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;State: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;On&quot;</span> <span class="o">:</span> <span class="s">&quot;Off&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on change</span>
<span class="kt">void</span> <span class="nf">rotate_r</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(r.getPosition());</span>
<span class="p">}</span>

<span class="c1">// on left or right rotattion</span>
<span class="kt">void</span> <span class="nf">showDirection_r</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(r.directionToString(r.getDirection()));</span>
<span class="p">}</span>

<span class="c1">// on change</span>
<span class="kt">void</span> <span class="nf">rotate_u</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">getPosition</span><span class="p">());</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="n">bd</span><span class="p">.</span><span class="n">setVol_1</span><span class="p">(</span><span class="n">k</span><span class="p">);</span> <span class="c1">// int 0...87 === 0...-87 dB</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Vol:&quot;</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">showDirection_u</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(u.directionToString(u.getDirection()));</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">encoder_read</span><span class="p">(</span><span class="n">lv_indev_drv_t</span> <span class="o">*</span><span class="n">drv</span><span class="p">,</span> <span class="n">lv_indev_data_t</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>

    <span class="n">data</span><span class="o">-&gt;</span><span class="n">enc_diff</span> <span class="o">=</span> <span class="n">enc_get_new_moves</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">mcp1</span><span class="p">.</span><span class="n">digitalRead</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">LV_INDEV_STATE_PR</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">LV_INDEV_STATE_REL</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="cm">/*No buffering now so no more data read*/</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">enc_get_new_moves</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">encoderCount</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">encoderCount</span> <span class="o">-</span> <span class="n">encoderLastValue</span><span class="p">;</span>
    <span class="n">encoderLastValue</span> <span class="o">=</span> <span class="n">encoderCount</span><span class="p">;</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Diff:&quot;</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">diff</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">diff</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_ingain</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_fade1</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_fade2</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_bass</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_mid</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_treb</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<p>Updated on  1 July 2021 at 16:33:25 W. Europe Summer Time</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../Testsoftware/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Testsoftware" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Testsoftware
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Datenbl%C3%A4tter/" class="md-footer__link md-footer__link--next" aria-label="Next: Datenblätter" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Datenblätter
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
    
  </body>
</html>