
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://mcjohnffs.github.io/Testsoftware/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>3. Testsoftware - DAB V2.0</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DAB V2.0" class="md-header__button md-logo" aria-label="DAB V2.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAB V2.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Testsoftware
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DAB V2.0" class="md-nav__button md-logo" aria-label="DAB V2.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    DAB V2.0
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Hard-%20und%20Software%20Knfiguration/" class="md-nav__link">
        Hard- und Software Konfiguration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Installation%20der%20Entwicklungsumgebung/" class="md-nav__link">
        Installation der Entwicklungsumgebung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../code_beschreibung/" class="md-nav__link">
        Code Beschreibung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bm83/" class="md-nav__link">
        BM83 Anleitung
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Testsoftware
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Files/_d_a_b__2___v0_81_8ino/" class="md-nav__link">
        Source Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Datenbl%C3%A4tter/" class="md-nav__link">
        Datenblätter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Quellen/" class="md-nav__link">
        Quellen
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="code">Code</h1>
<p><a href="https://github.com/mcjohnffs/RAU-DAB-Radio-V2/tree/test">Testsoftware v 1.0 - Github</a></p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @file DAB_2_V0.1.ino</span>
<span class="cm"> *</span>
<span class="cm"> * @mainpage DAB Radio V2.0</span>
<span class="cm"> *</span>
<span class="cm"> * @section description Übersicht</span>
<span class="cm"> * An example sketch demonstrating how to use Doxygen style comments for</span>
<span class="cm"> * generating source code documentation with Doxygen.</span>
<span class="cm"> *</span>
<span class="cm"> * @section circuit Produkt</span>
<span class="cm"> * - 1</span>
<span class="cm"> * - 2</span>
<span class="cm"> *</span>
<span class="cm"> * @section libraries Libraries</span>
<span class="cm"> * - 2</span>
<span class="cm"> *   - 1</span>
<span class="cm"> *</span>
<span class="cm"> * @section notes Notizen</span>
<span class="cm"> * - Comments are Doxygen compatible.</span>
<span class="cm"> *</span>
<span class="cm"> * @section todo TODO</span>
<span class="cm"> * - Don&#39;t use Doxygen style formatting inside the body of a function.</span>
<span class="cm"> *</span>
<span class="cm"> * @section author Author</span>
<span class="cm"> * - Created by Egzon Isaku on 16/06/2021.</span>
<span class="cm"> * - Modified by </span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) RAU Regionales Ausbildungszentrum AU.  All rights reserved.</span>
<span class="cm"> */</span>

<span class="c1">// Libraries</span>
<span class="cp">#include</span> <span class="cpf">&lt;lvgl.h&gt;</span><span class="c1">                   // Light and versatile Embedded Graphics Library (LVGL)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;TFT_eSPI.h&gt;</span><span class="c1">               // General TFT library (TFT_eSPI)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;touch.h&quot;</span><span class="c1">                  // Communication header for the touch controller - between &quot;FT6206&quot; and LVGL</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="c1">                   // Arduino I2C library</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PCA9634.h&gt;</span><span class="c1">                // Led driver library (PCA9634)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;MCP23017.h&gt;</span><span class="c1">               // Port expander library (MPC23017)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;BM83.h&quot;</span><span class="c1">                   // Bluetooth Module library (BM83/BM64)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;SoftwareSerial.h&gt;</span><span class="c1">         // SoftwareSerial Library for ESP32</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;BD37544FS.h&gt;</span><span class="c1">              // Sound processor library (BD37544FS)</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;ESPRotary.h&quot;</span><span class="c1">              // Encoder Library für ESP32</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;soc/timer_group_struct.h&quot;</span><span class="c1"> // Watchdog timer</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;soc/timer_group_reg.h&quot;</span><span class="c1">    // Watchdog timer</span><span class="cp"></span>

<span class="c1">// Defines</span>
<span class="cp">#define BUFFER_MULTIPLIER 35</span>
<span class="cp">#define RX_PIN 4</span>
<span class="cp">#define TX_PIN 0</span>
<span class="cp">#define TX_IND 5</span>
<span class="cp">#define DAC1 26</span>

<span class="cp">#define ENC1_ROTARY_PIN_A 34</span>
<span class="cp">#define ENC1_ROTARY_PIN_B 35</span>

<span class="cp">#define ENC2_ROTARY_PIN_A 39</span>
<span class="cp">#define ENC2_ROTARY_PIN_B 36</span>

<span class="cp">#define CLICKS_PER_STEP 2 </span><span class="c1">// this number depends on your rotary encoder</span>

<span class="cp">#define MIN_POS 0</span>
<span class="cp">#define MAX_POS 87</span>
<span class="cp">#define START_POS 0</span>
<span class="cp">#define INCREMENT 1 </span><span class="c1">// this number is the counter increment on each step</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">mfbPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>

<span class="n">ESPRotary</span> <span class="n">r</span><span class="p">;</span>
<span class="n">ESPRotary</span> <span class="n">u</span><span class="p">;</span>

<span class="c1">// Sound processor instance (BD37544FS)</span>
<span class="n">BD37544FS</span> <span class="n">bd</span><span class="p">;</span>

<span class="c1">// Bluetooth module instance (BM83)</span>
<span class="n">SoftwareSerial</span> <span class="nf">swSerial</span><span class="p">(</span><span class="n">RX_PIN</span><span class="p">,</span> <span class="n">TX_PIN</span><span class="p">);</span>
<span class="n">BM83</span> <span class="nf">bm83</span><span class="p">(</span><span class="n">swSerial</span><span class="p">,</span> <span class="n">TX_IND</span><span class="p">);</span>

<span class="c1">// Led driver instance (PCA9634)</span>
<span class="n">PCA9634</span> <span class="nf">ledDriver</span><span class="p">(</span><span class="mh">0x15</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

<span class="c1">// MPC 1 + 2 instance (MCP23017)</span>
<span class="n">MCP23017</span> <span class="n">mcp1</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x20</span><span class="p">);</span>
<span class="n">MCP23017</span> <span class="n">mcp2</span> <span class="o">=</span> <span class="n">MCP23017</span><span class="p">(</span><span class="mh">0x24</span><span class="p">);</span>

<span class="c1">// LVGL task handles</span>
<span class="n">TaskHandle_t</span> <span class="n">Task1</span><span class="p">;</span>
<span class="n">TaskHandle_t</span> <span class="n">Task2</span><span class="p">;</span>

<span class="k">static</span> <span class="n">lv_group_t</span> <span class="o">*</span><span class="n">g</span><span class="p">;</span>             <span class="c1">//An object group</span>
<span class="k">static</span> <span class="n">lv_indev_t</span> <span class="o">*</span><span class="n">encoder_indev</span><span class="p">;</span> <span class="c1">//Encoder 1 input device</span>

<span class="c1">// Global LVGL object variables</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tabview</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">tab4</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">gauge1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">led1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">btn3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">sw3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">cont3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">bar1</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">lmeter</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">lmeter2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">label</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">spinbox</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label2</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label3</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label4</span><span class="p">;</span>
<span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider_label5</span><span class="p">;</span>

<span class="c1">// Global variables</span>
<span class="kt">uint8_t</span> <span class="n">conf</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">vol</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">encoderLastValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">TFT_eSPI</span> <span class="n">tft</span> <span class="o">=</span> <span class="n">TFT_eSPI</span><span class="p">();</span> <span class="cm">/* TFT instance */</span>
<span class="k">static</span> <span class="n">lv_disp_buf_t</span> <span class="n">disp_buf</span><span class="p">;</span>
<span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_1</span><span class="p">[</span><span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="n">BUFFER_MULTIPLIER</span><span class="p">];</span>
<span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">buf_2</span><span class="p">[</span><span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="n">BUFFER_MULTIPLIER</span><span class="p">];</span>
<span class="cp">#if USE_LV_LOG != 0</span>
<span class="cm">/* Serial debugging */</span>

<span class="kt">void</span> <span class="nf">my_print</span><span class="p">(</span><span class="n">lv_log_level_t</span> <span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dsc</span><span class="p">)</span>
<span class="p">{</span>

    <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s@%d-&gt;%s</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">dsc</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/* Display flushing */</span>
<span class="kt">void</span> <span class="nf">my_disp_flush</span><span class="p">(</span><span class="n">lv_disp_drv_t</span> <span class="o">*</span><span class="n">disp</span><span class="p">,</span> <span class="k">const</span> <span class="n">lv_area_t</span> <span class="o">*</span><span class="n">area</span><span class="p">,</span> <span class="n">lv_color_t</span> <span class="o">*</span><span class="n">color_p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">uint32_t</span> <span class="n">w</span> <span class="o">=</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">x2</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">x1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="kt">uint32_t</span> <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">y2</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">y1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">tft</span><span class="p">.</span><span class="n">startWrite</span><span class="p">();</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setAddrWindow</span><span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">x1</span><span class="p">,</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">y1</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">pushColors</span><span class="p">(</span><span class="o">&amp;</span><span class="n">color_p</span><span class="o">-&gt;</span><span class="n">full</span><span class="p">,</span> <span class="n">w</span> <span class="o">*</span> <span class="n">h</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">endWrite</span><span class="p">();</span>

    <span class="n">lv_disp_flush_ready</span><span class="p">(</span><span class="n">disp</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// The standard Arduino setup function used for setup and configuration</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>

    <span class="c1">// I2C init @ 100 kHz</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">setClock</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>

    <span class="c1">// Serial debugging @ 115200 baud</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>

    <span class="c1">// Software serial for BM83/BM64 Uart communication @ 9600 baud</span>
    <span class="n">swSerial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

    <span class="c1">// Input read task creation</span>
    <span class="n">xTaskCreatePinnedToCore</span><span class="p">(</span>
        <span class="n">read_inputs</span><span class="p">,</span>   <span class="cm">/* Task function. */</span>
        <span class="s">&quot;read_inputs&quot;</span><span class="p">,</span> <span class="cm">/* String with name of task. */</span>
        <span class="mi">10000</span><span class="p">,</span>         <span class="cm">/* Stack size in bytes. */</span>
        <span class="nb">NULL</span><span class="p">,</span>          <span class="cm">/* Parameter passed as input of the task */</span>
        <span class="mi">1</span><span class="p">,</span>             <span class="cm">/* Priority of the task. */</span>
        <span class="o">&amp;</span><span class="n">Task1</span><span class="p">,</span>        <span class="cm">/* Task handle. */</span>
        <span class="mi">0</span><span class="p">);</span>            <span class="cm">/* Core 0 or 1 (Core 1 is used for the arduino loop function for now)*/</span>

    <span class="c1">// Encoder read task creation</span>
    <span class="c1">//xTaskCreatePinnedToCore(encoder_loop, &quot;encoder_loop&quot;, 10000, NULL, 2, &amp;Task2, 0);</span>

    <span class="c1">// Sets the MFB pin (GPIO23) as output (BM83)</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

    <span class="c1">// Encoder 1+2 init</span>

    <span class="c1">// Led driver init</span>
    <span class="n">ledDriver</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="c1">// all on (inverted)</span>
    <span class="n">ledDriver</span><span class="p">.</span><span class="n">allOff</span><span class="p">();</span>

    <span class="c1">// Charger IC setup----------------------------------------------------------------</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x14</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0xB9</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x02</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x03</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x5A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x04</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x40</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x05</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x66</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x06</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x5A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x07</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x89</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>

    <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="mh">0x6A</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x09</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x04</span><span class="p">);</span>
    <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>
    <span class="c1">// --------------------------------------------------------------------</span>

    <span class="c1">//MCP 1 init</span>
    <span class="n">mcp1</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
    <span class="n">mcp1</span><span class="p">.</span><span class="n">portMode</span><span class="p">(</span><span class="n">MCP23017Port</span><span class="o">::</span><span class="n">A</span><span class="p">,</span> <span class="mb">0b11111111</span><span class="p">);</span> <span class="c1">// Set all as inputs (MCP1)</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

    <span class="c1">//MCP 2 init</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">portMode</span><span class="p">(</span><span class="n">MCP23017Port</span><span class="o">::</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Set all as outputs (MCP2)</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

    <span class="c1">// Standby sequence</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 7.5V disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// +-5V disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// PVCC disable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Power Amp shutdown activation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// Power Amp mute activation</span>

    <span class="c1">// Power up sequence</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;7.5V enabled!&quot;</span><span class="p">);</span> <span class="c1">// 7.5V enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;+-5V enabled!&quot;</span><span class="p">);</span> <span class="c1">// +-5V enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">dacWrite</span><span class="p">(</span><span class="n">DAC1</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;PVCC enabled!&quot;</span><span class="p">);</span> <span class="c1">// PVCC enable</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Power Amp Shutdown deactivated!&quot;</span><span class="p">);</span> <span class="c1">// Power amp shutdown deactivation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Power Amp Mute deactivated!&quot;</span><span class="p">);</span> <span class="c1">// Power amp mute deactivation</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

    <span class="c1">// LVGL init</span>
    <span class="n">lv_init</span><span class="p">();</span>

<span class="cp">#if USE_LV_LOG != 0</span>
    <span class="cm">/* Serial debugging */</span>
    <span class="kt">void</span> <span class="n">my_print</span><span class="p">(</span><span class="n">lv_log_level_t</span> <span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dsc</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s@%d-&gt;%s</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">dsc</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
    <span class="p">}</span>
<span class="cp">#endif</span>

    <span class="c1">// TFT init</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setRotation</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

    <span class="c1">// Touch device init</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">touch</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">150</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Couldn&#39;t start FT6206 touchscreen controller&quot;</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;FT6206 touchscreen controller connected!&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">lv_disp_buf_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_buf</span><span class="p">,</span> <span class="n">buf_1</span><span class="p">,</span> <span class="n">buf_2</span><span class="p">,</span> <span class="n">LV_HOR_RES_MAX</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

    <span class="c1">// Display init</span>
    <span class="n">lv_disp_drv_t</span> <span class="n">disp_drv</span><span class="p">;</span>
    <span class="n">lv_disp_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_drv</span><span class="p">);</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">hor_res</span> <span class="o">=</span> <span class="n">tft</span><span class="p">.</span><span class="n">width</span><span class="p">();</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">ver_res</span> <span class="o">=</span> <span class="n">tft</span><span class="p">.</span><span class="n">height</span><span class="p">();</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">flush_cb</span> <span class="o">=</span> <span class="n">my_disp_flush</span><span class="p">;</span>
    <span class="n">disp_drv</span><span class="p">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">disp_buf</span><span class="p">;</span>
    <span class="n">lv_disp_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">disp_drv</span><span class="p">);</span>

    <span class="c1">// Display input driver init</span>
    <span class="n">lv_indev_drv_t</span> <span class="n">indev_drv</span><span class="p">;</span>
    <span class="n">lv_indev_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LV_INDEV_TYPE_POINTER</span><span class="p">;</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">read_cb</span> <span class="o">=</span> <span class="n">my_touchpad_read</span><span class="p">;</span>
    <span class="n">lv_indev_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>

    <span class="n">lv_indev_drv_t</span> <span class="n">enc_indev</span><span class="p">;</span>
    <span class="n">lv_indev_drv_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LV_INDEV_TYPE_ENCODER</span><span class="p">;</span>
    <span class="n">indev_drv</span><span class="p">.</span><span class="n">read_cb</span> <span class="o">=</span> <span class="n">encoder_read</span><span class="p">;</span>
    <span class="n">encoder_indev</span> <span class="o">=</span> <span class="n">lv_indev_drv_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indev_drv</span><span class="p">);</span>

    <span class="k">static</span> <span class="n">lv_style_t</span> <span class="n">style1</span><span class="p">;</span>
    <span class="n">lv_style_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>
    <span class="n">lv_style_set_border_color</span><span class="p">(</span><span class="o">&amp;</span><span class="n">style1</span><span class="p">,</span> <span class="n">LV_STATE_FOCUSED</span><span class="p">,</span> <span class="n">LV_COLOR_RED</span><span class="p">);</span>

    <span class="c1">//Create Group for encoder 1</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">lv_group_create</span><span class="p">();</span>
    <span class="n">lv_indev_set_group</span><span class="p">(</span><span class="n">encoder_indev</span><span class="p">,</span> <span class="n">g</span><span class="p">);</span>

    <span class="k">static</span> <span class="n">lv_color_t</span> <span class="n">needle_colors</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_BLUE</span><span class="p">;</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_ORANGE</span><span class="p">;</span>
    <span class="n">needle_colors</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">LV_COLOR_PURPLE</span><span class="p">;</span>

    <span class="n">tabview</span> <span class="o">=</span> <span class="n">lv_tabview_create</span><span class="p">(</span><span class="n">lv_scr_act</span><span class="p">(),</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_tabview_set_btns_pos</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="n">LV_TABVIEW_TAB_POS_BOTTOM</span><span class="p">);</span>
    <span class="c1">//lv_tabview_set_anim_time(tabview, 100);</span>

    <span class="cm">/*Add 4 tabs (the tabs are page (lv_page) and can be scrolled*/</span>
    <span class="n">tab1</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Setups&quot;</span><span class="p">);</span>
    <span class="n">tab2</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Values&quot;</span><span class="p">);</span>
    <span class="n">tab3</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Enables&quot;</span><span class="p">);</span>
    <span class="n">tab4</span> <span class="o">=</span> <span class="n">lv_tabview_add_tab</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="s">&quot;Parameters&quot;</span><span class="p">);</span>

    <span class="n">lmeter</span> <span class="o">=</span> <span class="n">lv_linemeter_create</span><span class="p">(</span><span class="n">tab2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_linemeter_set_range</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>   <span class="cm">/*Set the range*/</span>
    <span class="n">lv_linemeter_set_value</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>       <span class="cm">/*Set the current value*/</span>
    <span class="n">lv_linemeter_set_scale</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="cm">/*Set the angle and number of lines*/</span>
    <span class="n">lv_obj_set_size</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">lmeter</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">lmeter2</span> <span class="o">=</span> <span class="n">lv_linemeter_create</span><span class="p">(</span><span class="n">tab2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_linemeter_set_range</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>   <span class="cm">/*Set the range*/</span>
    <span class="n">lv_linemeter_set_value</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>       <span class="cm">/*Set the current value*/</span>
    <span class="n">lv_linemeter_set_scale</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="cm">/*Set the angle and number of lines*/</span>
    <span class="n">lv_obj_set_size</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">lmeter2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">cont</span> <span class="o">=</span> <span class="n">lv_cont_create</span><span class="p">(</span><span class="n">tab3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>                   <span class="cm">/*Auto realign when the size changes*/</span>
    <span class="n">lv_obj_align_origo</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_CENTER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/*This parametrs will be sued when realigned*/</span>
    <span class="n">lv_cont_set_fit</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="n">LV_FIT_TIGHT</span><span class="p">);</span>
    <span class="n">lv_cont_set_layout</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="n">LV_LAYOUT_GRID</span><span class="p">);</span>

    <span class="n">sw1</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;7.5V&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw1</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">sw2</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;+-5V&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw2</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">sw3</span> <span class="o">=</span> <span class="n">lv_switch_create</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;PVCC&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">sw3</span><span class="p">,</span> <span class="n">event_sw1</span><span class="p">);</span>

    <span class="n">cont2</span> <span class="o">=</span> <span class="n">lv_cont_create</span><span class="p">(</span><span class="n">tab1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>                   <span class="cm">/*Auto realign when the size changes*/</span>
    <span class="n">lv_obj_align_origo</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_CENTER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/*This parametrs will be sued when realigned*/</span>
    <span class="n">lv_cont_set_fit</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="n">LV_FIT_TIGHT</span><span class="p">);</span>
    <span class="n">lv_cont_set_layout</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="n">LV_LAYOUT_GRID</span><span class="p">);</span>

    <span class="n">btn1</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="n">event_bm83setup</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;BM83 Setup&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="n">btn2</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="n">event_bm83pair</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;BM83 Pairing&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="n">btn3</span> <span class="o">=</span> <span class="n">lv_btn_create</span><span class="p">(</span><span class="n">cont2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="n">event_soundsetup</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s">&quot;Sound Proc. Setup&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_add_style</span><span class="p">(</span><span class="n">btn3</span><span class="p">,</span> <span class="n">LV_BTN_PART_MAIN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">style1</span><span class="p">);</span>

    <span class="cm">/* Create a slider in the center of the display */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span> <span class="o">=</span> <span class="n">lv_slider_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_width</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">LV_DPI</span> <span class="o">*</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">slider_event_cb_ingain</span><span class="p">);</span>
    <span class="n">lv_slider_set_range</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

    <span class="cm">/* Create a label below the slider */</span>
    <span class="n">slider_label</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">LV_ALIGN_OUT_BOTTOM_MID</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

    <span class="cm">/* Create an informative label */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="s">&quot;Input Gain (0-20dB)&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>

    <span class="c1">//______________________________________________________________</span>

    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">lv_slider_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_obj_set_width</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="n">LV_DPI</span> <span class="o">*</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
    <span class="n">lv_obj_set_event_cb</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="n">slider_event_cb_fade1</span><span class="p">);</span>
    <span class="n">lv_slider_set_range</span><span class="p">(</span><span class="n">slider2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">87</span><span class="p">);</span>

    <span class="cm">/* Create a label below the slider */</span>
    <span class="n">slider_label2</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_set_auto_realign</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">slider_label2</span><span class="p">,</span> <span class="n">slider2</span><span class="p">,</span> <span class="n">LV_ALIGN_OUT_BOTTOM_MID</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

    <span class="cm">/* Create an informative label */</span>
    <span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">info2</span> <span class="o">=</span> <span class="n">lv_label_create</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">info2</span><span class="p">,</span> <span class="s">&quot;Fader 1 (0-(-87dB))&quot;</span><span class="p">);</span>
    <span class="n">lv_obj_align</span><span class="p">(</span><span class="n">info2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">LV_ALIGN_IN_TOP_LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">tabview</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw1</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw2</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">sw3</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn1</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn2</span><span class="p">);</span>
    <span class="n">lv_group_add_obj</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">btn3</span><span class="p">);</span>

    <span class="n">lv_group_set_wrap</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="n">lv_group_set_editing</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

    <span class="n">r</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ENC1_ROTARY_PIN_A</span><span class="p">,</span> <span class="n">ENC1_ROTARY_PIN_B</span><span class="p">,</span> <span class="n">CLICKS_PER_STEP</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setChangedHandler</span><span class="p">(</span><span class="n">rotate_r</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setLeftRotationHandler</span><span class="p">(</span><span class="n">showDirection_r</span><span class="p">);</span>
    <span class="n">r</span><span class="p">.</span><span class="n">setRightRotationHandler</span><span class="p">(</span><span class="n">showDirection_r</span><span class="p">);</span>

    <span class="n">u</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ENC2_ROTARY_PIN_A</span><span class="p">,</span> <span class="n">ENC2_ROTARY_PIN_B</span><span class="p">,</span> <span class="n">CLICKS_PER_STEP</span><span class="p">,</span> <span class="n">MIN_POS</span><span class="p">,</span> <span class="n">MAX_POS</span><span class="p">,</span> <span class="n">START_POS</span><span class="p">,</span> <span class="n">INCREMENT</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setChangedHandler</span><span class="p">(</span><span class="n">rotate_u</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setLeftRotationHandler</span><span class="p">(</span><span class="n">showDirection_u</span><span class="p">);</span>
    <span class="n">u</span><span class="p">.</span><span class="n">setRightRotationHandler</span><span class="p">(</span><span class="n">showDirection_u</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Watchdog timer manip</span>
    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_wprotect</span> <span class="o">=</span> <span class="n">TIMG_WDT_WKEY_VALUE</span><span class="p">;</span>
    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_feed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">TIMERG0</span><span class="p">.</span><span class="n">wdt_wprotect</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">conf</span> <span class="o">=</span> <span class="n">mcp1</span><span class="p">.</span><span class="n">readRegister</span><span class="p">(</span><span class="n">MCP23017Register</span><span class="o">::</span><span class="n">GPIO_A</span><span class="p">);</span> <span class="c1">// MCP1 register read for inputs</span>
    <span class="n">r</span><span class="p">.</span><span class="n">loop</span><span class="p">();</span>
    <span class="n">u</span><span class="p">.</span><span class="n">loop</span><span class="p">();</span>

    <span class="c1">// LVGL task handler</span>
    <span class="n">lv_task_handler</span><span class="p">();</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">read_inputs</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">parameter</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">for</span> <span class="p">(;;)</span>
    <span class="p">{</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">bitRead</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>

                <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="p">{</span>
                <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">lv_tabview_set_tab_act</span><span class="p">(</span><span class="n">tabview</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LV_ANIM_OFF</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vTaskDelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_bm83setup</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Clicked</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// sets the MFB Pin 23 &quot;High&quot; to power on BM83 over BAT_IN</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">powerOn</span><span class="p">();</span>            <span class="c1">// Sends &quot;power on&quot; command over UART to BM83</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">mfbPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// sets the MFB Pin 23 &quot;LOW&quot; (no longer needed after power on process)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_bm83pair</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">bm83</span><span class="p">.</span><span class="n">mmiAction</span><span class="p">(</span><span class="n">BM83_MMI_STANDBY_ENTERING_PAIRING</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_soundsetup</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_CLICKED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setSelect</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// int 0...7 === A B C D E F INPUT_SHORT INPUT_MUTE</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// int 0...7 === 0...20 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setVol_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_2</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// int 0...87 === 0...-87 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setBass</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setMidd</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setTreb</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// int -7...0...+7 === -14...+14 dB</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">event_sw1</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;State: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;On&quot;</span> <span class="o">:</span> <span class="s">&quot;Off&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lv_switch_get_state</span><span class="p">(</span><span class="n">sw3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">mcp2</span><span class="p">.</span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">rotate_r</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(r.getPosition());</span>
<span class="p">}</span>

<span class="c1">// on left or right rotattion</span>
<span class="kt">void</span> <span class="nf">showDirection_r</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(r.directionToString(r.getDirection()));</span>
<span class="p">}</span>

<span class="c1">// on change</span>
<span class="kt">void</span> <span class="nf">rotate_u</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">getPosition</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="n">bd</span><span class="p">.</span><span class="n">setVol_1</span><span class="p">(</span><span class="n">k</span><span class="p">);</span> <span class="c1">// int 0...87 === 0...-87 dB</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Vol:&quot;</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">showDirection_u</span><span class="p">(</span><span class="n">ESPRotary</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Serial.println(u.directionToString(u.getDirection()));</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">encoder_read</span><span class="p">(</span><span class="n">lv_indev_drv_t</span> <span class="o">*</span><span class="n">drv</span><span class="p">,</span> <span class="n">lv_indev_data_t</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>

    <span class="n">data</span><span class="o">-&gt;</span><span class="n">enc_diff</span> <span class="o">=</span> <span class="n">enc_get_new_moves</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">mcp1</span><span class="p">.</span><span class="n">digitalRead</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">LV_INDEV_STATE_PR</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">LV_INDEV_STATE_REL</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="cm">/*No buffering now so no more data read*/</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">enc_get_new_moves</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">encoderCount</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">encoderCount</span> <span class="o">-</span> <span class="n">encoderLastValue</span><span class="p">;</span>
    <span class="n">encoderLastValue</span> <span class="o">=</span> <span class="n">encoderCount</span><span class="p">;</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Diff:&quot;</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">diff</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">diff</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_ingain</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_fade1</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setFad_1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_fade2</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_cb_bass</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_mid</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">slider_event_treb</span><span class="p">(</span><span class="n">lv_obj_t</span> <span class="o">*</span><span class="n">slider</span><span class="p">,</span> <span class="n">lv_event_t</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">LV_EVENT_VALUE_CHANGED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* max 3 bytes for number plus 1 null terminating byte */</span>
        <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;%u&quot;</span><span class="p">,</span> <span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
        <span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">slider_label</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
        <span class="n">bd</span><span class="p">.</span><span class="n">setIn_gain</span><span class="p">(</span><span class="n">lv_slider_get_value</span><span class="p">(</span><span class="n">slider</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../bm83/" class="md-footer__link md-footer__link--prev" aria-label="Previous: BM83 Anleitung" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              BM83 Anleitung
            </div>
          </div>
        </a>
      
      
        
        <a href="../Files/_d_a_b__2___v0_81_8ino/" class="md-footer__link md-footer__link--next" aria-label="Next: Source Code" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Source Code
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
    
  </body>
</html>